[package]
name = "core-crypto"
description = "Abstraction over OpenMLS with persistent keystore"
repository = "https://github.com/wireapp/core-crypto"
version = "0.2.0"
edition = "2021"
license = "GPL-3.0-only"

[lib]
name = "core_crypto"
crate-type = ["lib", "cdylib"]

[dependencies]
thiserror = "1.0"
hex = "0.4"
#eyre = "0.6"
openmls = "0.4"
openmls_traits = "0.1"
# FIXME: This is being pulled only because of flaky error types from openmls
tls_codec = "0.2"

[dependencies.core-crypto-keystore]
version = "0.2"
path = "../keystore"

[dependencies.mls-crypto-provider]
version = "0.2"
path = "../mls-provider"

[dev-dependencies]
uuid = { version = "1.0", features = ["v4", "v5"] }
rand = "0.8"
tempfile = "3.3"
wasm-bindgen-test = "0.3"
rstest = "0.15"
rstest_reuse = "0.3"
rcgen = { version = "0.9", features = ["x509-parser"] }

[package.metadata.wasm-pack.profile.release]
wasm-opt = ["-Os", "--enable-mutable-globals", "--enable-threads", "--detect-features"]
