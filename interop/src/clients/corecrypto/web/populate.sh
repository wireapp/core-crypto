#!/usr/bin/env bash

## Populate this folder with the necessary files from elsewhere in the build tree
## ! These are generated files; ensure they exist first!
##
## This is necessary for Typescript to give helpful hints about `mls.ts`, but not
## necessary for interop to actually run.

set -e

target="$(dirname "$(realpath "$0")")"
root="$(git rev-parse --show-toplevel)"
out="$root/crypto-ffi/bindings/js/out"

mkdir -p "$target/autogenerated"
mkdir -p "$target/autogenerated/wasm-bindgen"
cp "$out/corecrypto.js" "$target/"
cp "$out/corecrypto.d.ts" "$target/"
cp "$out/autogenerated/wasm-bindgen/index_bg.wasm" "$target/autogenerated/wasm-bindgen"
